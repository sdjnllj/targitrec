<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>每日目标打卡</title>
    <base href="/targitrec/">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- 主页面 -->
        <div id="homePage" class="page">
            <header class="header">
                <h1>每日目标打卡</h1>
                <button id="newGoalBtn" class="btn primary">新建目标</button>
            </header>

            <!-- 目标列表 -->
            <div id="goalList" class="goal-list">
                <!-- 目标会被动态添加到这里 -->
            </div>
        </div>

        <!-- 新建目标页面 -->
        <div id="newGoalPage" class="page" style="display: none;">
            <header class="header">
                <button class="btn back" id="backFromNew">返回</button>
                <h2>新建目标</h2>
            </header>
            <form id="newGoalForm" class="goal-form">
                <input type="text" id="goalTitle" placeholder="输入目标名称..." required>
                <button type="submit" class="btn primary">保存</button>
            </form>
        </div>

        <!-- 目标详情页面 -->
        <div id="detailPage" class="page" style="display: none;">
            <header class="header">
                <button class="btn back" id="backFromDetail">返回</button>
            </header>

            <!-- 保留这个标题作为主标题 -->
            <div class="view-title-container">
                <h2 class="goal-name"></h2>
            </div>

            <div class="view-controls">
                <button class="btn view-btn active" data-view="week">周视图</button>
                <button class="btn view-btn" data-view="month">月视图</button>
                <button class="btn view-btn" data-view="year">年视图</button>
            </div>

            <div class="view-container">
                <div id="weekView" class="view">
                    <div class="date-nav">
                        <button class="btn nav" id="prevWeek">◀</button>
                        <span id="weekRange"></span>
                        <button class="btn nav" id="nextWeek">▶</button>
                    </div>
                    <div id="weekContent"></div>
                </div>

                <div id="monthView" class="view" style="display: none;">
                    <div class="date-nav">
                        <button class="btn nav" id="prevMonth">◀</button>
                        <span id="monthRange"></span>
                        <button class="btn nav" id="nextMonth">▶</button>
                    </div>
                    <div id="monthContent"></div>
                </div>

                <div id="yearView" class="view" style="display: none;">
                    <div class="date-nav">
                        <button class="btn nav" id="prevYear">◀</button>
                        <span id="yearRange"></span>
                        <button class="btn nav" id="nextYear">▶</button>
                    </div>
                    <div id="yearContent"></div>
                </div>
            </div>
        </div>

        <!-- 提示消息 -->
        <div id="toast" class="toast" style="display: none;"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.0/dist/av-min.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
